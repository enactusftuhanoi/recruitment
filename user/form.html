<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application form | Enactus FTU Hanoi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/form.css">
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="/assets/logo_den.png" alt="Enactus FTU Hanoi Logo" style="height:100px; margin-right:15px;">
            </div>
            <div class="header-content">
                <h3 style="color: rgb(57, 57, 57);">Enactus FTU Hanoi 18<sup>th</sup> Recruitment</h3>
            </div>
        </header>
        
        <div class="progress-bar">
            <div class="step active" id="step0">
                <div class="step-number">0</div>
                <div class="step-label">Hình thức ứng tuyển</div>
            </div>
            <div class="step" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">Thông tin cá nhân</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">Vị trí ứng tuyển</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">Chi tiết ứng tuyển</div>
            </div>
            <div class="step" id="step4">
                <div class="step-number">4</div>
                <div class="step-label">Xác nhận</div>
            </div>
        </div>
        
        <div class="form-container">
            <form id="recruitmentForm" novalidate>
                <!-- Section -1: Intro -->
                <div class="form-section active" id="sectionIntro">
                    <h2>
                    <img src="/assets/icon.png" alt="Enactus Logo" style="height:30px; vertical-align:middle; margin-right:8px;">
                       ENACTUS FTU HANOI | TUYỂN THÀNH VIÊN THẾ HỆ 18.0
                    </h2>
                    <div id="intro-info-container"></div>
                    <div class="buttons">
                        <button type="button" class="btn-next" onclick="showSection(0)">
                            Tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                <!-- Section 0: Application Type -->
                <div class="form-section" id="section0">
                    <h2><i class="fas fa-clipboard-list"></i> Hình thức ứng tuyển</h2>
                    
                    <div class="application-type-container">
                        <div class="application-type" id="type-form" onclick="selectApplicationType('form')">
                            <i class="fas fa-file-alt"></i>
                            <h3>Điền đơn ứng tuyển</h3>
                            <p>Hoàn thành đơn ứng tuyển trực tuyến với đầy đủ thông tin và câu hỏi</p>
                        </div>
                        
                        <div class="application-type" id="type-interview" onclick="selectApplicationType('interview')">
                            <i class="fas fa-microphone"></i>
                            <h3>Phỏng vấn thay đơn</h3>
                            <p>Chỉ cần cung cấp thông tin cơ bản và tham gia phỏng vấn thay cho việc điền đơn</p>
                        </div>
                    </div>
                    
                    <input type="hidden" id="application_type" name="application_type" value="">
                    
                    <div class="buttons">
                        <button type="button" class="btn-prev" onclick="prevSection(0)">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="button" class="btn-next" onclick="nextSection(0)">
                            Tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Section 1: Personal Information -->
                <div class="form-section" id="section1">
                    <h2><i class="fas fa-user-circle"></i> Thông tin cá nhân</h2>
                    
                    <div class="form-group">
                        <label for="fullname" class="required">Họ và tên</label>
                        <input type="text" id="fullname" name="fullname" required>
                    </div>
                    <div class="form-group">
                        <label for="birthdate" class="required">Ngày/tháng/năm sinh</label>
                        <input type="date" id="birthdate" name="birthdate" required lang="vi" placeholder="dd/mm/yyyy">
                    </div>

                    <div class="form-group">
                        <label for="gender" class="required">Giới tính</label>
                        <select id="gender" name="gender" required>
                            <option value="">-- Chọn giới tính --</option>
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                            <option value="Khác">Khác</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="email" class="required">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone" class="required">Số điện thoại</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>

                    <div class="form-group">
                        <label for="school" class="required">Trường đang theo học</label>
                        <input type="text" id="school" name="school" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="major" class="required">Khóa/Chuyên ngành đang theo học</label>
                        <input type="text" id="major" name="major" required>
                    </div>

                    <div class="form-group">
                        <label for="facebook" class="required">Link Facebook</label>
                        <input type="url" id="facebook" name="facebook" placeholder="https://facebook.com/username" required>
                    </div>
                    
                    <div class="buttons">
                        <button type="button" class="btn-prev" onclick="prevSection(1)">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="button" class="btn-next" onclick="nextSection(1)">
                            Tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Section 2: Position Application -->
                <div class="form-section" id="section2">
                    <h2><i class="fas fa-briefcase"></i> Vị trí ứng tuyển</h2>
                    
                    <div class="position-container">
                        <div class="position-box">
                            <h3><i class="fas fa-star"></i> Bạn muốn đăng ký vào ban nào ? <span class="required"></span></h3>
                            <div class="form-group">
                                <label for="priority_position" class="required">Ban mong muốn nhất (Nguyện vọng 1)</label>
                                <select id="priority_position" name="priority_position" required onchange="updateSecondaryOptions(); updateMDSubDepartments(); updatePositionNames();">
                                    <option value="">-- Chọn vị trí --</option>
                                    <option value="MD">Ban Truyền thông</option>
                                    <option value="HR">Ban Nhân sự - Sự kiện</option>
                                    <option value="ER">Ban Đối ngoại</option>
                                    <option value="PD">Ban Dự án</option>
                                </select>
                            </div>
                            
                            <!-- MD Sub-departments (only visible when MD is selected) -->
                            <div class="md-sub-departments" id="md-sub-departments" style="display: none;">
                                <h4>Tiểu ban Truyền thông</h4>
                                <p>Bạn có thể chọn một hoặc cả hai tiểu ban:</p>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="md_design" name="md_sub_departments[]" value="Design">
                                        <label for="md_design">Design</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="md_content" name="md_sub_departments[]" value="Content">
                                        <label for="md_content">Content</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="position-box">
                            <h3><i class="fas fa-clock"></i> Bạn có nguyện vọng đăng ký vào ban nào khác không ?</h3>
                            <div class="form-group">
                                <label for="secondary_position">Ban quan tâm khác (Nguyện vọng 2)</label>
                                <select id="secondary_position" name="secondary_position" onchange="updateMDSubDepartments(); updatePositionNames();">
                                    <option value="">-- Chọn vị trí --</option>
                                    <option value="None">Không chọn</option>
                                    <option value="MD">Ban Truyền thông</option>
                                    <option value="HR">Ban Nhân sự - Sự kiện</option>
                                    <option value="ER">Ban Đối ngoại</option>
                                    <option value="PD">Ban Dự án</option>
                                </select>
                            </div>
                            
                            <!-- MD Sub-departments for secondary position (only visible when MD is selected) -->
                            <div class="md-sub-departments" id="md-sub-departments-secondary" style="display: none;">
                                <h4>Tiểu ban Truyền thông (NV2)</h4>
                                <p>Bạn có thể chọn một hoặc cả hai tiểu ban:</p>
                                <div class="checkbox-group">
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="md_design_secondary" name="md_sub_departments_secondary[]" value="Design">
                                        <label for="md_design_secondary">Design</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="md_content_secondary" name="md_sub_departments_secondary[]" value="Content">
                                        <label for="md_content_secondary">Content</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button type="button" class="btn-prev" onclick="prevSection(2)">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="button" class="btn-next" onclick="nextSection(2)">
                            Tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Section 3: Experience and Skills -->
                <div class="form-section" id="section3">
                    <h2><i class="fas fa-tasks"></i> Chi tiết ứng tuyển</h2>

                    <div id="interview-schedule" style="display:none; margin-top:20px;">
                        <h3><i class="fas fa-calendar-alt"></i> Đăng ký lịch phỏng vấn</h3>
                        <div id="interview-questions"></div>
                    </div>

                    <div class="tab-container">
                        <div class="tab-buttons">
                            <button type="button" class="tab-button active" onclick="showTab('general')">Câu hỏi chung</button>
                            <button type="button" class="tab-button" onclick="showTab('priority')" id="priority-tab-btn">Câu hỏi dành cho ban ... (NV1)</button>
                            <button type="button" class="tab-button" onclick="showTab('secondary')" id="secondary-tab-btn" style="display: none;">Câu hỏi dành cho ban ... (NV2)</button>
                        </div>
                        
                        <div id="tab-general" class="tab-content active">
                          <h3><i class="fas fa-info-circle"></i> Câu hỏi chung</h3>
                          <div id="general-questions"></div>
                        </div>

                        
                        <div class="tab-content" id="tab-priority">
                            
                            <!-- Câu hỏi dành riêng cho phân ban ưu tiên -->
                            <div class="sub-section">
                                <h3><i class="fas fa-question-circle"></i> Câu hỏi dành riêng cho <span id="ban-name">Nguyện vọng 1</span></h3>
                                <div id="ban-specific-questions">
                                    <!-- Câu hỏi sẽ được tự động thêm vào đây bằng JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="tab-secondary">
                            
                            <!-- Câu hỏi dành riêng cho phân ban dự bị -->
                            <div class="sub-section">
                                <h3><i class="fas fa-question-circle"></i> Câu hỏi dành riêng cho <span id="secondary-ban-name">Nguyện vọng 2</span></h3>
                                <div id="secondary-ban-specific-questions">
                                    <!-- Câu hỏi sẽ được tự động thêm vào đây bằng JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button type="button" class="btn-prev" onclick="prevSection(3)">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="button" class="btn-next" onclick="nextSection(3)">
                            Tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Section 4: Confirmation -->
                <div class="form-section" id="section4">
                    <h2><i class="fas fa-check-circle"></i> Xác nhận thông tin</h2>
                    
                    <div class="form-group">
                        <p>Vui lòng kiểm tra lại thông tin trước khi gửi:</p>
                        <div id="summary" style="background: #f9f9f9; padding: 25px; border-radius: 10px; margin-top: 20px; border-left: 4px solid var(--primary);"></div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-item" style="background: transparent; padding: 0;">
                            <input type="checkbox" id="agree" name="agree" required>
                            <label for="agree" class="required">Tôi xác nhận rằng tất cả thông tin trên là chính xác</label>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button type="button" class="btn-prev" onclick="prevSection(4)">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Gửi đơn ứng tuyển
                        </button>
                    </div>
                </div>
            </form>
            
            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle"></i>
                <h2>Đơn ứng tuyển đã được gửi thành công!</h2>
                <p>Cảm ơn bạn đã nộp đơn ứng tuyển đến Enactus FTU Hanoi. Chúng tôi sẽ liên hệ với bạn trong thời gian sớm nhất qua email hoặc số điện thoại bạn đã cung cấp.</p>
                
                <div class="login-redirect">
                    <h3>Truy cập hệ thống của ứng viên</h3>
                    <a href="/user/login.html" class="btn-login">
                        <i class="fas fa-right-to-bracket"></i> Đăng nhập hệ thống
                    </a>
                    <p id="redirectMsg"></p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2025 Enactus FTU Hanoi - All rights reserved</p>
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- load data trước -->
    <script src="/content/questions.js"></script>
    <script src="/content/calendar.js"></script>
    
    <!-- logic phụ thuộc vào data -->
    <script src="/script/form.js"></script>
</body>
</html>
